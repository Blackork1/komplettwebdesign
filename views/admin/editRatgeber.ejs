<%- include('../partials/admin_header') %>

<div class="container my-5">
  <h1 class="mb-4">Ratgeber bearbeiten</h1>

  <!-- Update-Form -->
  <form action="/admin/ratgeber/<%= post.id %>/edit"
        method="POST"
        enctype="multipart/form-data"
        class="needs-validation" novalidate>

    <!-- Titel -->
    <div class="mb-3">
      <label for="title" class="form-label">Titel *</label>
      <input type="text" id="title" name="title"
             class="form-control" required
             value="<%= post.title %>">
    </div>

    <!-- Kurzbeschreibung -->
    <div class="mb-3">
      <label for="excerpt" class="form-label">Kurzbeschreibung</label>
      <textarea id="excerpt" name="excerpt" rows="2" class="form-control"><%= post.excerpt || '' %></textarea>
    </div>

    <!-- Kategorie -->
    <div class="mb-3">
      <label for="category" class="form-label">Kategorie</label>
      <input type="text" id="category" name="category" class="form-control" value="<%= post.category || '' %>">
    </div>

    <!-- Featured -->
    <div class="form-check form-switch mb-3">
      <input class="form-check-input" type="checkbox" id="featured" name="featured" <%= post.featured ? 'checked' : '' %>>
      <label class="form-check-label" for="featured">Ratgeber ist „Featured“</label>
    </div>

    <!-- Inhalt -->
    <div class="mb-3">
      <label for="content" class="form-label">Inhalt *</label>
      <textarea id="content" name="content" rows="12" class="form-control" required><%= post.content %></textarea>
    </div>

    <!-- Aktuelles Bild -->
    <div class="mb-3">
      <p class="mb-1">Aktuelles Titelbild:</p>
      <% if (post.image_url) { %>
        <img src="<%= post.image_url %>" alt="Aktuelles Titelbild" class="img-fluid rounded mb-2" style="max-height:150px;">
      <% } else { %>
        <p class="text-muted">Kein Bild vorhanden.</p>
      <% } %>
    </div>

    <!-- Neues Bild -->
    <div class="mb-4">
      <label class="form-label">Neues Titelbild wählen (optional)</label>
      <input type="file" name="hero_image" accept="image/*" class="form-control">
      <small class="text-muted">Lässt du das Feld leer, bleibt das aktuelle Bild erhalten.</small>
    </div>

    <button class="btn btn-primary">Änderungen speichern</button>
    <a href="/admin/ratgeber" class="btn btn-secondary">Abbrechen</a>
  </form>

  <!-- Delete -->
  <hr class="my-5">
  <form action="/admin/ratgeber/<%= post.id %>/delete"
        method="POST"
        onsubmit="return confirm('Diesen Ratgeber endgültig löschen?');">
    <button class="btn btn-danger">Ratgeber löschen</button>
  </form>
</div>

<%- include('../partials/admin_footer') %>
