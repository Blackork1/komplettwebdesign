<%- include('../partials/head') %>
<%- include('../partials/header') %>
<div class="section">
  <div class="container mt-5">
    <h1 class="white">Vielen Dank!</h1>
    <p class="white">Hallo <%= data.name || '' %>,</p>
    <p class="white">vielen Dank für deine Anfrage über unser Kontaktformular. Wir haben die folgenden Angaben erhalten:</p>
    <table class="table">
      <% const hasValue = (value) => {
        if (value === null || value === undefined) return false;
        if (Array.isArray(value)) return value.length > 0;
        if (typeof value === 'string') return value.trim().length > 0;
        return true;
      };

      const rows = [
        { label: 'Paket:', value: data.paket },
        { label: 'Seitenumfang:', value: data.umfang },
        { label: 'Texte:', value: data.texterstellung ? (data.texterstellung === 'erstellt' ? 'Texterstellung benötigt' : 'Eigene Texte vorhanden') : null },
        { label: 'Bilder:', value: data.bilderstellung ? (data.bilderstellung === 'erstellt' ? 'Bildrecherche/-erstellung benötigt' : 'Eigene Bilder vorhanden') : null },
        { label: 'Funktionen:', value: Array.isArray(data.inhalte) ? data.inhalte.join(', ') : (hasValue(data.inhalte) ? data.inhalte : null) },
        { label: 'Weitere Wünsche:', value: data.weitereWuensche },
        { label: 'Termin:', value: formattedAppointment },
        { label: 'Name:', value: data.name },
        { label: 'E-Mail:', value: data.email },
        { label: 'Telefon:', value: data.telefon },
        { label: 'Firma:', value: data.firma },
        { label: 'Sonstige Infos:', value: data.sonstigeInfos }
      ];
      %>
      <% rows.forEach(row => { %>
      <% if (hasValue(row.value)) { %>
      <tr>
        <th><%= row.label %></th>
        <td><%= row.value %></td>
      </tr>
      <% } %>
      <% }); %>
    </table>
    <% if (appointment) { %>
    <p><a href="/kontakt/ics/<%= appointment.id %>" class="btn btn-primary">Termin als ICS herunterladen</a></p>
    <% } %>
    <p class="white">Wir werden uns in Kürze bei dir melden, um die Details zu besprechen.</p>
    <p class="white">Mit freundlichen Grüßen<br>Dein KomplettWebdesign-Team</p>
  </div>
</div>
<%- include('../partials/footer') %>