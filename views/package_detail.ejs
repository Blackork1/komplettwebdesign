<!DOCTYPE html>
<html lang="de">

<style>
  .package-detail-page .hero-meta {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .package-detail-page .hero-price {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 1rem 1.5rem;
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 20px 45px rgba(194, 74, 44, 0.18);
    border: 1px solid rgba(228, 93, 63, 0.2);
  }

  .package-detail-page .hero-price .price-label {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--packages-muted);
  }

  .package-detail-page .hero-price .price-amount {
    font-size: 1.9rem;
    font-weight: 700;
    color: var(--packages-ink);
    font-family: "Poppins", "Inter", sans-serif;
  }

  .package-detail-page .hero-note {
    font-size: 0.95rem;
    color: var(--packages-accent-dark);
    font-weight: 600;
  }

  .package-detail-page .package-overview {
    padding: clamp(3rem, 6vw, 4.5rem) 0;
  }

  .package-detail-page .overview-grid {
    display: grid;
    gap: clamp(2rem, 4vw, 3.5rem);
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    align-items: start;
  }

  .package-detail-page .overview-intro {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .package-detail-page .overview-intro h2 {
    font-size: clamp(1.9rem, 3vw, 2.4rem);
    color: var(--packages-ink);
    margin-bottom: 1rem;
  }

  .package-detail-page .overview-intro p {
    color: var(--packages-muted);
    line-height: 1.7;
  }

  .package-detail-page .overview-cards {
    display: grid;
    gap: 1.5rem;
  }

  .package-detail-page .overview-card {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 20px;
    padding: 1.75rem;
    box-shadow: 0 25px 60px rgba(144, 58, 32, 0.12);
    border: 1px solid rgba(228, 93, 63, 0.18);
  }

  .package-detail-page .overview-card h3 {
    font-size: 1.25rem;
    margin-bottom: 0.75rem;
    color: var(--packages-ink);
  }

  .package-detail-page .overview-card p {
    margin: 0;
    color: var(--packages-text);
    line-height: 1.6;
  }

  @media (min-width: 992px) {
    .package-detail-page .overview-grid {
      grid-template-columns: minmax(320px, 0.95fr) minmax(360px, 1.05fr);
      align-items: stretch;
    }

    .package-detail-page .overview-intro {
      justify-content: center;
    }
  }

  .package-detail-page .package-detail-sections {
    padding: clamp(3rem, 6vw, 5rem) 0;
    background: rgba(255, 255, 255, 0.6);
  }

  .package-detail-page .package-detail-sections h2,
  .package-detail-page .package-process h2,
  .package-detail-page .package-previews h2,
  .package-detail-page .package-addons h2,
  .package-detail-page .package-contact h2 {
    font-size: clamp(2rem, 3.2vw, 2.6rem);
    color: var(--packages-ink);
    text-align: center;
    margin-bottom: 2rem;
  }

  .package-detail-page .detail-grid {
    display: grid;
    gap: 1.75rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .package-detail-page .detail-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 22px;
    padding: 1.85rem;
    border: 1px solid rgba(228, 93, 63, 0.18);
    box-shadow: 0 25px 50px rgba(144, 58, 32, 0.1);
    display: flex;
    flex-direction: column;
    gap: 0.85rem;
  }

  .package-detail-page .detail-card h3 {
    font-size: 1.2rem;
    color: var(--packages-ink);
  }

  .package-detail-page .detail-text {
    color: var(--packages-text);
    line-height: 1.65;
  }

  .package-detail-page .detail-text p {
    margin-bottom: 0.65rem;
  }

  .package-detail-page .detail-text ul {
    margin: 0.75rem 0 0 1.25rem;
  }

  .package-detail-page .package-process {
    padding: clamp(3rem, 6vw, 4.5rem) 0;
  }

  .package-detail-page .process-timeline {
    display: grid;
    gap: 1.5rem;
  }

  .package-detail-page .process-step {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 1rem;
    align-items: start;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 1.5rem 1.75rem;
    border: 1px solid rgba(228, 93, 63, 0.16);
    box-shadow: 0 20px 45px rgba(144, 58, 32, 0.08);
  }

  .package-detail-page .process-index {
    width: 3rem;
    height: 3rem;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--packages-accent) 0%, var(--packages-accent-dark) 100%);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.1rem;
  }

  .package-detail-page .process-content h3 {
    margin: 0 0 0.5rem;
    font-size: 1.15rem;
    color: var(--packages-ink);
  }

  .package-detail-page .process-content p {
    margin: 0;
    color: var(--packages-text);
    line-height: 1.6;
  }

  .package-detail-page .package-addons {
    padding: clamp(3rem, 6vw, 4.5rem) 0;
    background: rgba(253, 236, 226, 0.6);
  }

  .package-detail-page .addons-grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    align-items: start;
  }

  .package-detail-page .addons-intro p {
    color: var(--packages-text);
    line-height: 1.6;
  }

  .package-detail-page .addons-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 1rem;
  }

  .package-detail-page .addons-list li {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.75rem;
    align-items: center;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 16px;
    padding: 1rem 1.25rem;
    border: 1px solid rgba(228, 93, 63, 0.14);
    color: var(--packages-text);
  }

  .package-detail-page .addons-list span[aria-hidden="true"] {
    font-size: 1.35rem;
    color: var(--packages-accent);
  }

  .package-detail-page .package-contact {
    padding: clamp(3rem, 6vw, 5rem) 0;
  }

  .package-detail-page .contact-inner {
    display: grid;
    gap: clamp(2rem, 4vw, 3.5rem);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    align-items: start;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 26px;
    padding: clamp(2rem, 5vw, 3rem);
    box-shadow: 0 35px 70px rgba(144, 58, 32, 0.14);
    border: 1px solid rgba(228, 93, 63, 0.18);
  }

  .package-detail-page .contact-copy {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .package-detail-page .contact-copy p {
    color: var(--packages-text);
    line-height: 1.7;
  }

  .package-detail-page .contact-highlights {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 0.75rem;
  }

  .package-detail-page .contact-highlights li {
    display: flex;
    gap: 0.65rem;
    align-items: flex-start;
    color: var(--packages-text);
  }

  .package-detail-page .contact-highlights li::before {
    content: "";
    width: 0.85rem;
    height: 0.85rem;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--packages-accent) 0%, var(--packages-accent-dark) 100%);
    box-shadow: 0 0 0 4px var(--packages-accent-soft);
    margin-top: 0.25rem;
  }

  .package-detail-page .contact-form-wrapper {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 22px;
    padding: 1.75rem;
    border: 1px solid rgba(228, 93, 63, 0.16);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .package-detail-page .contact-form {
    display: grid;
    gap: 1.2rem;
  }

  .package-detail-page .contact-form label {
    font-weight: 600;
    color: var(--packages-ink);
  }

  .package-detail-page .contact-form input,
  .package-detail-page .contact-form select,
  .package-detail-page .contact-form textarea {
    width: 100%;
    border-radius: 12px;
    border: 1px solid rgba(228, 93, 63, 0.2);
    padding: 0.85rem 1rem;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.9);
    color: var(--packages-text);
    transition: border 0.2s ease, box-shadow 0.2s ease;
  }

  .package-detail-page .contact-form input:focus,
  .package-detail-page .contact-form select:focus,
  .package-detail-page .contact-form textarea:focus {
    outline: none;
    border-color: var(--packages-accent);
    box-shadow: 0 0 0 3px rgba(228, 93, 63, 0.2);
  }

  .package-detail-page .contact-form .btn-hero {
    justify-self: flex-start;
  }

  .package-detail-page .no-slots {
    font-size: 0.95rem;
    color: var(--packages-muted);
    margin: 0;
  }

  .package-detail-page .package-previews {
    padding: clamp(3rem, 6vw, 4.5rem) 0;
    background: rgba(255, 255, 255, 0.75);
  }

  .package-detail-page .package-previews .previews-subtitle {
    text-align: center;
    max-width: 640px;
    margin: 0 auto 2.5rem;
    color: var(--packages-muted);
  }

  .package-detail-page .previews-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .package-detail-page .preview-card {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 22px;
    overflow: hidden;
    border: 1px solid rgba(228, 93, 63, 0.16);
    box-shadow: 0 25px 55px rgba(144, 58, 32, 0.12);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .package-detail-page .preview-card:hover,
  .package-detail-page .preview-card:focus-within {
    transform: translateY(-6px);
    box-shadow: 0 35px 65px rgba(144, 58, 32, 0.18);
  }

  .package-detail-page .preview-card.is-current {
    border-color: var(--packages-accent);
    box-shadow: 0 40px 70px rgba(228, 93, 63, 0.18);
  }

  .package-detail-page .preview-image {
    position: relative;
    aspect-ratio: 4 / 3;
    overflow: hidden;
  }

  .package-detail-page .preview-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .package-detail-page .preview-body {
    display: flex;
    flex-direction: column;
    gap: 0.85rem;
    padding: 1.75rem;
  }

  .package-detail-page .preview-label {
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--packages-muted);
  }

  .package-detail-page .preview-body h3 {
    margin: 0;
    font-size: 1.3rem;
    color: var(--packages-ink);
  }

  .package-detail-page .preview-body p {
    margin: 0;
    color: var(--packages-text);
    line-height: 1.6;
  }

  .package-detail-page .preview-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
    color: var(--packages-accent-dark);
  }

  .package-detail-page .preview-current {
    background: rgba(228, 93, 63, 0.12);
    color: var(--packages-accent-dark);
    padding: 0.25rem 0.65rem;
    border-radius: 999px;
    font-size: 0.75rem;
  }

  @media (max-width: 640px) {
    .package-detail-page .package-previews .previews-subtitle {
      text-align: left;
    }

    .package-detail-page .previews-grid {
      grid-template-columns: 1fr;
      gap: 1.75rem;
    }

    .package-detail-page .preview-card {
      max-width: 100%;
    }

    .package-detail-page .preview-body {
      padding: 1.5rem;
    }

    .package-detail-page .preview-body h3 {
      font-size: 1.2rem;
    }

    .package-detail-page .preview-meta {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.35rem;
    }

    .package-detail-page .preview-body .btn-soft-outline {
      width: 100%;
      text-align: center;
    }
  }

  @media (max-width: 768px) {
    .package-detail-page .process-step {
      grid-template-columns: 1fr;
      text-align: left;
    }

    .package-detail-page .process-index {
      width: 2.5rem;
      height: 2.5rem;
      font-size: 1rem;
    }

    .package-detail-page .contact-form .btn-hero {
      width: 100%;
      text-align: center;
      justify-content: center;
    }
  }
</style>

<head>
  <%- include('partials/head') %>
  <title><%= pack.name %>-Paket – Komplett Webdesign</title>
</head>

<body>
  <%- include('partials/header') %>
  <main class="packages-page package-detail-page">
    <%
      function slugify(value) {
        if (!value) return '';
        return value
          .toString()
          .normalize('NFD')
          .replace(/[\u0300-\u036f]/g, '')
          .replace(/[^\w\s-]/g, '')
          .trim()
          .toLowerCase()
          .replace(/\s+/g, '-')
          .replace(/-+/g, '-');
      }

      function formatPrice(pkg) {
        if (!pkg) return '';
        if (pkg.price && typeof pkg.price === 'string') {
          const priceValue = pkg.price.replace(/[^0-9.,]/g, '').replace(',', '.');
          const parsed = Number(priceValue);
          if (!Number.isNaN(parsed)) {
            return parsed.toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
          }
          return pkg.price;
        }
        if (pkg.price_formatted) return pkg.price_formatted;
        if (pkg.price_amount_cents != null) {
          return (Number(pkg.price_amount_cents) / 100).toLocaleString('de-DE', {
            style: 'currency',
            currency: 'EUR'
          });
        }
        if (pkg.price_amount != null) {
          return Number(pkg.price_amount).toLocaleString('de-DE', {
            style: 'currency',
            currency: 'EUR'
          });
        }
        return '';
      }

      const slug = slugify(pack.slug || pack.name);
      const priceDisplay = formatPrice(pack) || (pack.price ? `${pack.price} €` : 'Auf Anfrage');
      const detailEntries = pack && pack.details && typeof pack.details === 'object'
        ? Object.entries(pack.details).filter(([title, text]) => title && text)
        : [];

      const heroSubtitles = {
        basis: 'Perfekt für den schnellen, professionellen Auftritt – alles drin, was du für den Start benötigst.',
        business: 'Für ambitionierte Unternehmen, die Leads generieren und mehrere Angebote klar strukturieren wollen.',
        premium: 'Das Rundum-sorglos-Paket inklusive Strategie, Content-Produktion und laufender Betreuung.',
        default: 'Individuell auf dein Unternehmen zugeschnitten – Design, Technik, Inhalte und Betreuung aus einer Hand.'
      };

      const highlightMap = {
        basis: [
          'Onepager mit klarer Storyline für Leistungen, Über-uns und Kontakt',
          'Professionelles Design inklusive Farb- und Typografie-Anpassung',
          'Rechtliche Seiten, Tracking-Setup und DSGVO-Check bereits vorbereitet'
        ],
        business: [
          'Mehrseitige Website mit Landingpages für jedes Angebot',
          'Conversion-orientierte Texte inklusive Keyword-Research',
          'Technische Integrationen wie Terminbuchung oder CRM-Anbindung'
        ],
        premium: [
          'Strategische Workshops und individuelle UX-Konzepte',
          'Content-Produktion (Text, Visuals, ggf. Animationen) inklusive',
          'Laufende Optimierung, Betreuung und priorisierter Support'
        ],
        default: [
          'Modernes, responsives Webdesign mit Fokus auf Sichtbarkeit',
          'Klare Conversion-Strecken, überzeugende Inhalte und SEO-Basics',
          'Zuverlässige Technik, Hosting und persönliche Betreuung'
        ]
      };

      const deliverablesMap = {
        basis: [
          {
            title: 'Design & Struktur',
            text: 'Moderner Onepager mit visuellen Highlights, sinnvollem Scroll-Verlauf und responsivem Layout für Mobilgeräte.'
          },
          {
            title: 'Inhalte & Rechtliches',
            text: 'Startseiten-Headline, Leistungsblöcke, Über-uns-Text sowie Impressum, Datenschutzerklärung und Cookie-Hinweise.'
          },
          {
            title: 'Technik & Support',
            text: 'Hosting, SSL-Zertifikat, Ladezeiten-Optimierung und Einbindung des Kontaktformulars inklusive Spam-Schutz.'
          }
        ],
        business: [
          {
            title: 'Mehrseitiges Konzept',
            text: 'Strukturierte Seitenarchitektur für Leistungen, Branchen, Team, Referenzen und optionale Landingpages.'
          },
          {
            title: 'Content & SEO',
            text: 'Keyword-basierte Textproduktion, Metadaten, strukturierte Daten sowie Optimierung für lokale Suchanfragen.'
          },
          {
            title: 'Integrationen',
            text: 'Terminbuchung, Newsletter, CRM-Schnittstellen oder Chat-Tools – wir übernehmen die Einrichtung.'
          }
        ],
        premium: [
          {
            title: 'Strategie & UX',
            text: 'Intensiver Kick-off-Workshop, Zielgruppenanalyse, Customer-Journey-Maps und Wireframes für jede Seite.'
          },
          {
            title: 'Content-Produktion',
            text: 'Ausarbeitung von Texten, Visuals, optional Fotoshootings sowie Animationen oder Microinteractions.'
          },
          {
            title: 'Operations & Betreuung',
            text: 'Monitoring, Performance-Analysen, A/B-Tests, Wartung, Sicherheitsupdates und priorisierter Support.'
          }
        ],
        default: [
          {
            title: 'Konzept & Design',
            text: 'Wir entwickeln ein individuelles Layout, das deine Marke stärkt und für alle Geräte optimiert ist.'
          },
          {
            title: 'Inhalte & SEO',
            text: 'Inklusive Textproduktion, Grund-SEO, Metadaten, Snippets und strukturierte Daten für bessere Rankings.'
          },
          {
            title: 'Technik & Betreuung',
            text: 'Hosting, Sicherheit, Wartung und persönlicher Support sorgen für einen reibungslosen Betrieb.'
          }
        ]
      };

      const processMap = {
        basis: [
          { label: 'Kick-off & Material', description: 'Wir besprechen Ziele, sammeln Inhalte und strukturieren den Onepager.' },
          { label: 'Design & Umsetzung', description: 'Individuelle Gestaltung, mobile Optimierung und technische Einrichtung.' },
          { label: 'Launch & Übergabe', description: 'Wir testen, veröffentlichen und erklären dir, wie du Inhalte anpasst.' }
        ],
        business: [
          { label: 'Strategie-Workshop', description: 'Analyse von Zielgruppen, Angeboten und passenden Conversion-Strecken.' },
          { label: 'Design & Content', description: 'Wir gestalten mehrere Seiten, erstellen Texte und integrieren deine Tools.' },
          { label: 'Launch & Optimierung', description: 'Tracking-Setups, Testing und Übergabe mit Schulung deines Teams.' }
        ],
        premium: [
          { label: 'Discovery & Roadmap', description: 'Gemeinsame Planung inkl. UX-Research, Markenleitfaden und Content-Plan.' },
          { label: 'Produktion & Entwicklung', description: 'High-End-Design, individuelle Komponenten, Automationen und QA-Prozesse.' },
          { label: 'Go-Live & Betreuung', description: 'Kontinuierliche Optimierung, Monitoring, Growth-Sprints und Support.' }
        ],
        default: [
          { label: 'Analyse & Planung', description: 'Wir schauen uns Ziele, Zielgruppe und bestehende Inhalte genau an.' },
          { label: 'Design & Erstellung', description: 'Konzeption, Design, Texte, Technik – alles aus einer Hand umgesetzt.' },
          { label: 'Launch & Betreuung', description: 'Nach dem Go-Live unterstützen wir bei Updates, SEO und Weiterentwicklung.' }
        ]
      };

      const addonsMap = {
        basis: [
          'Mehrsprachige Versionen oder zusätzliche Sektionen jederzeit erweiterbar.',
          'Optionale Wartungspakete inklusive Content-Updates und Sicherheitsmonitoring.',
          'Hosting auf deutschen Servern mit täglichem Backup und SSL-Zertifikat.'
        ],
        business: [
          'Lead-Nurturing-Automationen, CRM-Anbindungen und Newsletter-Setup möglich.',
          'Regelmäßige Landingpage-Optimierung und Conversion-Tracking auf Wunsch.',
          'Technische Betreuung inklusive Update-Service und priorisiertem Support.'
        ],
        premium: [
          'Marketing-Automationen, Schnittstellen zu ERP/CRM und individuelle Web-Apps.',
          'Monatliche Performance-Workshops, KPI-Reportings und Growth-Sprints.',
          'Content-Refreshes, Kampagnen-Landingpages und Support-SLAs inklusive.'
        ],
        default: [
          'Flexible Add-ons wie Blog, Terminbuchung oder Mitgliederbereich jederzeit ergänzbar.',
          'Wartung, Hosting und Support können modulweise oder als Flat gebucht werden.',
          'Wir beraten zu SEO, Online-Marketing und Conversion-Optimierung.'
        ]
      };

      const previewPackages = [
        {
          slug: 'basis',
          name: 'Basis',
          description: 'Schneller Launch als Onepager – ideal für Selbstständige und erste Projekte.',
          price: 'ab 499 €',
          image: '/images/basis.webp'
        },
        {
          slug: 'business',
          name: 'Business',
          description: 'Mehrseitiger Unternehmensauftritt mit Fokus auf Leads und Skalierung.',
          price: 'ab 899 €',
          image: '/images/business.webp'
        },
        {
          slug: 'premium',
          name: 'Premium',
          description: 'High-End-Auftritt inkl. Strategie, Content-Produktion & Betreuung.',
          price: 'ab 1.499 €',
          image: '/images/premium.webp'
        }
      ];

      const heroHighlights = highlightMap[slug] || highlightMap.default;
      const deliverables = deliverablesMap[slug] || deliverablesMap.default;
      const processSteps = processMap[slug] || processMap.default;
      const addons = addonsMap[slug] || addonsMap.default;
      const heroSubtitle = heroSubtitles[slug] || heroSubtitles.default;
      const isCurrent = preview => preview.slug === slug;
      const includesBaseFeatures = Boolean(pack.includes_base_features);
    %>
    <section class="packages-hero package-detail-hero">
      <div class="container hero-grid">
        <div class="hero-copy">
          <span class="hero-badge">Komplettpaket <%= pack.name %></span>
          <h1 class="hero-title"><%= pack.name %>-Paket</h1>
          <p class="hero-subtitle"><%= heroSubtitle %></p>
          <ul class="hero-highlights">
            <% heroHighlights.forEach(item => { %>
            <li><%= item %></li>
            <% }) %>
          </ul>
          <div class="hero-meta">
            <div class="hero-price">
              <span class="price-label">Investition ab</span>
              <span class="price-amount"><%= priceDisplay %></span>
            </div>
            <% if (includesBaseFeatures) { %>
            <p class="hero-note">✔ Enthält alle Leistungen des Basis-Pakets plus erweiterte Inhalte.</p>
            <% } %>
          </div>
          <div class="hero-actions">
            <a class="btn btn-hero" href="#kontaktformular">Jetzt Beratung sichern</a>
            <a class="btn btn-soft-outline" href="/pakete">Pakete vergleichen</a>
          </div>
        </div>
        <div class="hero-visual" aria-hidden="true">
          <div class="hero-image-frame">
            <img src="<%= pack.image && pack.image.startsWith('/') ? pack.image : `/images/${pack.image}` %>" alt="Vorschau des <%= pack.name %>-Pakets" loading="lazy" />
          </div>
        </div>
      </div>
    </section>

    <section class="package-overview">
      <div class="container overview-grid">
        <div class="overview-intro">
          <h2>Was das <%= pack.name %>-Paket einzigartig macht</h2>
          <p>
            Jede Umsetzung basiert auf einem klaren Plan: Wir analysieren deine Ziele, entwickeln ein schlüssiges
            Storytelling und setzen das Design pixelgenau um. So entsteht eine Website, die Vertrauen schafft, Leads
            generiert und langfristig wächst.
          </p>
        </div>
        <div class="overview-cards">
          <% deliverables.forEach(block => { %>
          <article class="overview-card">
            <h3><%= block.title %></h3>
            <p><%= block.text %></p>
          </article>
          <% }) %>
        </div>
      </div>
    </section>

    <% if (detailEntries.length) { %>
    <section class="package-detail-sections">
      <div class="container">
        <h2>Leistungsumfang im Detail</h2>
        <div class="detail-grid">
          <% detailEntries.forEach(([title, text]) => { %>
          <article class="detail-card">
            <h3><%= title %></h3>
            <div class="detail-text">
              <%- text %>
            </div>
          </article>
          <% }) %>
        </div>
      </div>
    </section>
    <% } %>

    <section class="package-process">
      <div class="container">
        <h2>So läuft unsere Zusammenarbeit ab</h2>
        <div class="process-timeline">
          <% processSteps.forEach((step, index) => { %>
          <div class="process-step">
            <span class="process-index">0<%= index + 1 %></span>
            <div class="process-content">
              <h3><%= step.label %></h3>
              <p><%= step.description %></p>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </section>

    <section class="package-addons">
      <div class="container addons-grid">
        <div class="addons-intro">
          <h2>Optionale Erweiterungen &amp; Services</h2>
          <p>
            Ob Marketing-Automation, zusätzliche Landingpages oder laufende Wartung – wir schnüren genau das Paket,
            das zu deinem Wachstum passt. Die wichtigsten Optionen auf einen Blick:
          </p>
        </div>
        <ul class="addons-list">
          <% addons.forEach(addon => { %>
          <li><span aria-hidden="true">➕</span><span><%= addon %></span></li>
          <% }) %>
        </ul>
      </div>
    </section>

    <section class="package-contact" id="kontaktformular">
      <div class="container contact-inner">
        <div class="contact-copy">
          <h2>Jetzt <%= pack.name %>-Paket anfragen</h2>
          <p>
            Wir melden uns innerhalb eines Werktags, klären offene Fragen und zeigen dir anhand einer Live-Vorschau,
            wie deine neue Website aussehen kann. Das Beratungsgespräch ist kostenlos und unverbindlich.
          </p>
          <% if (successMessage) { %>
          <div class="alert alert-success"><%= successMessage %></div>
          <% } %>
          <ul class="contact-highlights">
            <li>Individueller Projektplan und transparente Kostenaufstellung</li>
            <li>Optional: Termin für ein erstes Strategie-Gespräch wählen</li>
            <li>Persönliche Ansprechpartner von Konzeption bis Launch</li>
          </ul>
        </div>
        <div class="contact-form-wrapper">
          <form action="/pakete/<%= slug %>/kontakt" method="POST" class="contact-form" data-recaptcha="v3" data-recaptcha-action="package_contact">
            <div class="form-group">
              <label for="inputName">Ihr Name</label>
              <input type="text" id="inputName" name="name" placeholder="Max Mustermann" required>
            </div>
            <div class="form-group">
              <label for="inputEmail">Ihre E-Mail-Adresse</label>
              <input type="email" id="inputEmail" name="email" placeholder="email@beispiel.de" required>
            </div>
            <% if (slots && slots.length > 0) { %>
            <div class="form-group">
              <label for="slot">Wunschtermin für Beratungsgespräch</label>
              <select id="slot" name="slot">
                <% slots.forEach(s => { %>
                <option value="<%= s.id %>">
                  <%= new Date(s.start_time).toLocaleString('de-DE', {
                    weekday: 'short', day: '2-digit', month: 'short',
                    hour: '2-digit', minute: '2-digit'
                  }) %>
                </option>
                <% }) %>
              </select>
            </div>
            <% } else { %>
            <p class="no-slots">Zurzeit sind keine freien Termine buchbar. Wir melden uns zeitnah mit Terminvorschlägen.</p>
            <% } %>
            <input type="hidden" name="token"><!-- reCAPTCHA -->
            <input type="hidden" name="package" value="<%= pack.name %>">
            <button type="submit" class="btn btn-hero w-100">Unverbindliche Anfrage senden</button>
          </form>
        </div>
      </div>
    </section>

    <section class="package-previews" aria-label="Weitere Pakete im Überblick">
      <div class="container">
        <h2>Alle Varianten im Vergleich</h2>
        <p class="previews-subtitle">Hier siehst du die wichtigsten Unterschiede auf einen Blick – inklusive Vorschau für jede Variante.</p>
        <div class="previews-grid">
          <% previewPackages.forEach(preview => { %>
          <article class="preview-card <%= isCurrent(preview) ? 'is-current' : '' %>">
            <div class="preview-image">
              <img src="<%= preview.image %>" alt="Design-Vorschau des <%= preview.name %>-Pakets" loading="lazy">
            </div>
            <div class="preview-body">
              <span class="preview-label">Website-Paket</span>
              <h3><%= preview.name %></h3>
              <p><%= preview.description %></p>
              <div class="preview-meta">
                <span class="preview-price"><%= preview.price %></span>
                <% if (isCurrent(preview)) { %>
                <span class="preview-current">Aktuell ausgewählt</span>
                <% } %>
              </div>
              <a class="btn btn-soft-outline" href="/pakete/<%= preview.slug %>">Vorschau ansehen</a>
            </div>
          </article>
          <% }) %>
        </div>
      </div>
    </section>
  </main>

  <%- include('partials/footer') %>

  <% if (typeof jsonLd !== 'undefined' && jsonLd && jsonLd.length) { %>
  <% jsonLd.forEach(function (schema) { %>
  <script type="application/ld+json">
    <%- JSON.stringify(schema) %>
  </script>
  <% }) %>
  <% } %>
</body>

</html>